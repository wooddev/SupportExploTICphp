<?php

namespace Transfer\ReservationBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * RdvRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class RdvRepository extends EntityRepository
{
    
    public function findByTransporteur($transporteur){
        
        $query = $this->getEntityManager()->createQuery();
        
        $query->setDQL('
                        SELECT r
                        FROM TransferReservationBundle:Rdv r
                        JOIN r.evenements e
                        JOIN e.transporteur t
                        WHERE t.id = :id
                ')
                ->setParameter('id', $transporteur->getId());
        
        return $query->getResult();
        
    }
}
